"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[717],{2717:function(e,a,t){t.r(a),t.d(a,{default:function(){return T}});var l=t(6768),n=t(144),o=t(1189);const i="http://localhost:3000/api";function r(){return o.A.get(`${i}/internment/list`)}function u(e){return o.A.post(`${i}/internment/create`,e)}var d=t(2729),s=t(697),c=t(4260),m=t(7511),b=t(4750);const p={class:"table-container"};var f={__name:"InternamientoTable",setup(e){const a=(0,n.KR)(""),t=(0,n.KR)(!1),o=(0,n.KR)([{title:"Habitación",align:"start",key:"numero_habitacion"},{title:"Cama",key:"cama_asignada"},{title:"Fecha de Ingreso",key:"fecha_ingreso"},{title:"Nombre del paciente",key:"paciente.nombres"},{title:"Apellidos del paciente",key:"paciente.apellidos"},{title:"Teléfono del paciente",key:"paciente.telefono"},{title:"F. de nacimiento",key:"fecha_nacimiento"}]),i=(0,n.KR)([]),u=async()=>{t.value=!0;try{const e=await r();i.value=e.data.data.map((e=>({numero_habitacion:e.numero_habitacion,cama_asignada:e.cama_asignada,fecha_ingreso:new Date(e.fecha_ingreso).toLocaleDateString(),paciente:e.paciente,fecha_nacimiento:new Date(e.paciente.fecha_nacimiento).toLocaleDateString()})))}catch(e){console.error("Error fetching internments:",e)}finally{t.value=!1}},f=()=>{t.value=!0,setTimeout((async()=>{await u(),t.value=!1}),500)};return(0,l.sV)((()=>{u()})),(e,n)=>((0,l.uX)(),(0,l.Wv)(d.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",p,[(0,l.bF)(c.Py,{headers:o.value,items:i.value,class:"elevation-1",search:a.value,loading:t.value,"sort-by":[{key:"paciente.nombres",order:"asc"}],"loading-text":"Cargando... Espere por favor"},{top:(0,l.k6)((()=>[(0,l.bF)(m.G,{class:"mx-4",inset:"",vertical:""}),(0,l.bF)(b.W,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",onInput:f},null,8,["modelValue"])])),_:1},8,["headers","items","search","loading"])])])),_:1})])),_:1}))}},v=t(1241);const _=(0,v.A)(f,[["__scopeId","data-v-5b1354f1"]]);var k=_,g=t(554),h=t(1606),F=t(3745),V=t(1772),y=t(1560),x=t(9336);const I=(0,l.Lk)("span",{class:"text-h5"},"Crear nuevo internamiento",-1);function w(e,a,t,n,o,i){return(0,l.uX)(),(0,l.Wv)(d.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(h.r,null,{default:(0,l.k6)((()=>[I])),_:1}),(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(y.n,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":a[4]||(a[4]=a=>e.valid=a),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(b.W,{modelValue:n.patientId,"onUpdate:modelValue":a[0]||(a[0]=e=>n.patientId=e),label:"ID del Paciente",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:n.roomNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>n.roomNumber=e),label:"Número de Habitación",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:n.assignedBed,"onUpdate:modelValue":a[2]||(a[2]=e=>n.assignedBed=e),label:"Cama Asignada",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:n.admissionDate,"onUpdate:modelValue":a[3]||(a[3]=e=>n.admissionDate=e),label:"Fecha de Admisión",type:"datetime-local",required:""},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(F.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(g.D,{color:"blue",text:"",onClick:a[5]||(a[5]=a=>e.$emit("close"))},{default:(0,l.k6)((()=>[(0,l.eW)("Cancelar")])),_:1}),(0,l.bF)(g.D,{color:"blue",text:"",onClick:n.submitInternamiento},{default:(0,l.k6)((()=>[(0,l.eW)("Guardar")])),_:1},8,["onClick"])])),_:1}),(0,l.bF)(V.p,{modelValue:n.dialogLoader,"onUpdate:modelValue":a[6]||(a[6]=e=>n.dialogLoader=e),scrim:!1,persistent:"",width:"auto"},{default:(0,l.k6)((()=>[(0,l.bF)(d.J,{color:"blue"},{default:(0,l.k6)((()=>[(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Procesando... "),(0,l.bF)(x.Z,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var C=t(4874),D=t.n(C),K={setup(e,{emit:a}){const t=(0,n.KR)(""),l=(0,n.KR)(""),o=(0,n.KR)(""),i=(0,n.KR)(""),r=(0,n.KR)(!1),d=async()=>{if(t.value&&l.value&&o.value&&i.value){const n={patientId:t.value,roomNumber:Number(l.value),assignedBed:o.value,admissionDate:new Date(i.value).toISOString()};r.value=!0;try{const e=await u(n);a("close"),r.value=!1,D().fire({icon:"success",title:"Internamiento Creado",text:e.data.message,confirmButtonText:"OK"})}catch(e){a("close"),r.value=!1,D().fire({icon:"error",title:"Error",text:e.response?.data?.message||"Hubo un error al crear el internamiento",confirmButtonText:"OK"})}}else console.log("Formulario incompleto")};return{patientId:t,roomNumber:l,assignedBed:o,admissionDate:i,dialogLoader:r,submitInternamiento:d}}};const R=(0,v.A)(K,[["render",w]]);var W=R,N=t(6756),L=t(5526);const A={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},B=(0,l.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-400"},"INTERNAMIENTOS",-1);var U={__name:"InternamientoView",setup(e){const a=(0,n.KR)(!1),t=()=>{a.value=!0};return(e,n)=>((0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(h.r,{class:"d-flex justify-between"},{default:(0,l.k6)((()=>[B,(0,l.bF)(g.D,{color:"primary",class:"white--text",onClick:t,style:{"margin-left":"auto"}},{default:(0,l.k6)((()=>[(0,l.eW)(" Crear + ")])),_:1})])),_:1}),(0,l.bF)(N.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(L.B,{cols:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(k)])),_:1})])),_:1}),(0,l.bF)(V.p,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e),"max-width":"500px"},{default:(0,l.k6)((()=>[(0,l.bF)(W,{onClose:n[0]||(n[0]=e=>a.value=!1)})])),_:1},8,["modelValue"])]))}};const O=U;var T=O}}]);
//# sourceMappingURL=717.c5988cc6.js.map