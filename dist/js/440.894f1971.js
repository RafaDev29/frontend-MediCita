"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[440],{440:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var l=t(6768),o=t(144),i=t(1189);const n="http://localhost:3000/api";function r(){return i.A.get(`${n}/visits/list`)}function d(e){return i.A.post(`${n}/visits/create`,e)}var s=t(2729),u=t(697),c=t(4260),m=t(7511),v=t(4750);const b={class:"table-container"};var _={__name:"VisitaTable",setup(e){const a=(0,o.KR)(""),t=(0,o.KR)(!1),i=(0,o.KR)([{title:"Codigo de visita",align:"start",key:"id_visita"},{title:"fecha de visita",key:"fecha_visita"},{title:"hora de visita",key:"hora_visita"},{title:"Número de habitación",key:"numero_habitacion"},{title:"Cama asiganada",key:"cama_asignada"},{title:"Fecha de ingreso",key:"fecha_ingreso"},{title:"Nombre del doctor",key:"doctor_names"},{title:"Apellido del doctor",key:"doctor_last_names"}]),n=(0,o.KR)([]),d=async()=>{t.value=!0;try{const e=await r();n.value=e.data.data.map((e=>({id_visita:e.id_visita,fecha_visita:new Date(e.fecha_visita).toLocaleDateString(),hora_visita:e.hora_visita,numero_habitacion:e.numero_habitacion,cama_asignada:e.cama_asignada,fecha_ingreso:new Date(e.fecha_ingreso).toLocaleDateString(),doctor_names:e.doctor_names,doctor_last_names:e.doctor_last_names})))}catch(e){console.error("Error fetching internments:",e)}finally{t.value=!1}},_=()=>{t.value=!0,setTimeout((async()=>{await d(),t.value=!1}),500)};return(0,l.sV)((()=>{d()})),(e,o)=>((0,l.uX)(),(0,l.Wv)(s.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(u.O,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",b,[(0,l.bF)(c.Py,{headers:i.value,items:n.value,class:"elevation-1",search:a.value,loading:t.value,"sort-by":[{key:"paciente.nombres",order:"asc"}],"loading-text":"Cargando... Espere por favor"},{top:(0,l.k6)((()=>[(0,l.bF)(m.G,{class:"mx-4",inset:"",vertical:""}),(0,l.bF)(v.W,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",onInput:_},null,8,["modelValue"])])),_:1},8,["headers","items","search","loading"])])])),_:1})])),_:1}))}},f=t(1241);const p=(0,f.A)(_,[["__scopeId","data-v-39faf51c"]]);var k=p,h=t(554),g=t(1606),V=t(3745),F=t(1772),y=t(1560),x=t(9336);const C=(0,l.Lk)("span",{class:"text-h5"},"Crear nuevo Medico",-1);function I(e,a,t,o,i,n){return(0,l.uX)(),(0,l.Wv)(s.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(g.r,null,{default:(0,l.k6)((()=>[C])),_:1}),(0,l.bF)(u.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(y.n,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":a[4]||(a[4]=a=>e.valid=a),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(v.W,{modelValue:o.internmentId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.internmentId=e),label:"Codigo de internamiento",required:""},null,8,["modelValue"]),(0,l.bF)(v.W,{modelValue:o.doctorId,"onUpdate:modelValue":a[1]||(a[1]=e=>o.doctorId=e),label:"Codigo del Doctor",type:"number",required:""},null,8,["modelValue"]),(0,l.bF)(v.W,{modelValue:o.visitDate,"onUpdate:modelValue":a[2]||(a[2]=e=>o.visitDate=e),label:"Fecha de visita",required:"",type:"date"},null,8,["modelValue"]),(0,l.bF)(v.W,{modelValue:o.visitTime,"onUpdate:modelValue":a[3]||(a[3]=e=>o.visitTime=e),label:"Hora de visita",type:"time",required:""},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(V.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(h.D,{color:"blue",text:"",onClick:a[5]||(a[5]=a=>e.$emit("close"))},{default:(0,l.k6)((()=>[(0,l.eW)("Cancelar")])),_:1}),(0,l.bF)(h.D,{color:"blue",text:"",onClick:o.submitInternamiento},{default:(0,l.k6)((()=>[(0,l.eW)("Guardar")])),_:1},8,["onClick"])])),_:1}),(0,l.bF)(F.p,{modelValue:o.dialogLoader,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogLoader=e),scrim:!1,persistent:"",width:"auto"},{default:(0,l.k6)((()=>[(0,l.bF)(s.J,{color:"blue"},{default:(0,l.k6)((()=>[(0,l.bF)(u.O,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Procesando... "),(0,l.bF)(x.Z,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var w=t(4874),D=t.n(w),K={setup(e,{emit:a}){const t=(0,o.KR)(),l=(0,o.KR)(),i=(0,o.KR)(""),n=(0,o.KR)(""),r=(0,o.KR)(!1),s=async()=>{if(t.value&&l.value&&i.value&&n.value){const o={internmentId:Number(t.value),doctorId:Number(l.value),visitDate:i.value,visitTime:n.value};r.value=!0;try{const e=await d(o);a("close"),r.value=!1,D().fire({icon:"success",title:"Visita Creada",text:e.data.message,confirmButtonText:"OK"})}catch(e){a("close"),r.value=!1,D().fire({icon:"error",title:"Error",text:e.response?.data?.message||"Hubo un error al crear el internamiento",confirmButtonText:"OK"})}}else console.log("Formulario incompleto")};return{internmentId:t,doctorId:l,visitDate:i,visitTime:n,dialogLoader:r,submitInternamiento:s}}};const W=(0,f.A)(K,[["render",I]]);var R=W,L=t(6756),T=t(5526);const U={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},A=(0,l.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-400"},"VISITAS MEDICAS",-1);var S={__name:"VisitasView",setup(e){const a=(0,o.KR)(!1),t=()=>{a.value=!0};return(e,o)=>((0,l.uX)(),(0,l.CE)("div",U,[(0,l.bF)(g.r,{class:"d-flex justify-between"},{default:(0,l.k6)((()=>[A,(0,l.bF)(h.D,{color:"primary",class:"white--text",onClick:t,style:{"margin-left":"auto"}},{default:(0,l.k6)((()=>[(0,l.eW)(" Crear + ")])),_:1})])),_:1}),(0,l.bF)(L.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(T.B,{cols:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(k)])),_:1})])),_:1}),(0,l.bF)(F.p,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value=e),"max-width":"500px"},{default:(0,l.k6)((()=>[(0,l.bF)(R,{onClose:o[0]||(o[0]=e=>a.value=!1)})])),_:1},8,["modelValue"])]))}};const E=S;var O=E}}]);
//# sourceMappingURL=440.894f1971.js.map