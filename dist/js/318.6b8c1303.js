"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[318],{2318:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var l=t(6768),o=t(144),n=t(1189);const r="http://localhost:3000/api";function d(){return n.A.get(`${r}/discharges/list`)}function i(e){return n.A.post(`${r}/discharges/create`,e)}var u=t(2729),s=t(697),c=t(4260),m=t(7511),b=t(4750);const _={class:"table-container"};var f={__name:"AltasTable",setup(e){const a=(0,o.KR)(""),t=(0,o.KR)(!1),n=(0,o.KR)([{title:"Codico",align:"start",key:"id_alta"},{title:"Fecha de alta",key:"fecha_alta"},{title:"Hora de alta",key:"hora_alta"},{title:"Número de habitación",key:"numero_habitacion"},{title:"Cama asignada",key:"cama_asignada"},{title:"Fecha de ingreso",key:"fecha_ingreso"},{title:"Nombre del Doctor",key:"doctor_names"},{title:"Apellido del Doctor",key:"doctor_last_names"}]),r=(0,o.KR)([]),i=async()=>{t.value=!0;try{const e=await d();r.value=e.data.data.map((e=>({id_alta:e.id_alta,fecha_alta:new Date(e.fecha_alta).toLocaleDateString(),hora_alta:e.hora_alta,numero_habitacion:e.numero_habitacion,cama_asignada:e.cama_asignada,fecha_ingreso:new Date(e.fecha_ingreso).toLocaleDateString(),doctor_names:e.doctor_names,doctor_last_names:e.doctor_last_names})))}catch(e){console.error("Error fetching internments:",e)}finally{t.value=!1}},f=()=>{t.value=!0,setTimeout((async()=>{await i(),t.value=!1}),500)};return(0,l.sV)((()=>{i()})),(e,o)=>((0,l.uX)(),(0,l.Wv)(u.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[(0,l.bF)(c.Py,{headers:n.value,items:r.value,class:"elevation-1",search:a.value,loading:t.value,"sort-by":[{key:"paciente.nombres",order:"asc"}],"loading-text":"Cargando... Espere por favor"},{top:(0,l.k6)((()=>[(0,l.bF)(m.G,{class:"mx-4",inset:"",vertical:""}),(0,l.bF)(b.W,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",onInput:f},null,8,["modelValue"])])),_:1},8,["headers","items","search","loading"])])])),_:1})])),_:1}))}},h=t(1241);const v=(0,h.A)(f,[["__scopeId","data-v-d160b7ba"]]);var g=v,p=t(554),k=t(1606),F=t(3745),y=t(1772),V=t(1560),x=t(9336);const C=(0,l.Lk)("span",{class:"text-h5"},"Crear nueva Alta medica",-1);function D(e,a,t,o,n,r){return(0,l.uX)(),(0,l.Wv)(u.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(k.r,null,{default:(0,l.k6)((()=>[C])),_:1}),(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(V.n,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":a[4]||(a[4]=a=>e.valid=a),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(b.W,{modelValue:o.internmentId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.internmentId=e),label:"Codigo de internado",type:"number",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:o.dischargeDate,"onUpdate:modelValue":a[1]||(a[1]=e=>o.dischargeDate=e),label:"Fecha de alta",type:"date",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:o.dischargeTime,"onUpdate:modelValue":a[2]||(a[2]=e=>o.dischargeTime=e),label:"Hora de alta",type:"time",required:""},null,8,["modelValue"]),(0,l.bF)(b.W,{modelValue:o.authorizingDoctorId,"onUpdate:modelValue":a[3]||(a[3]=e=>o.authorizingDoctorId=e),label:"Codigo de doctor autorizado",type:"number",required:""},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(F.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(p.D,{color:"blue",text:"",onClick:a[5]||(a[5]=a=>e.$emit("close"))},{default:(0,l.k6)((()=>[(0,l.eW)("Cancelar")])),_:1}),(0,l.bF)(p.D,{color:"blue",text:"",onClick:o.submitInternamiento},{default:(0,l.k6)((()=>[(0,l.eW)("Guardar")])),_:1},8,["onClick"])])),_:1}),(0,l.bF)(y.p,{modelValue:o.dialogLoader,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogLoader=e),scrim:!1,persistent:"",width:"auto"},{default:(0,l.k6)((()=>[(0,l.bF)(u.J,{color:"blue"},{default:(0,l.k6)((()=>[(0,l.bF)(s.O,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Procesando... "),(0,l.bF)(x.Z,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var w=t(4874),I=t.n(w),A={setup(e,{emit:a}){const t=(0,o.KR)(""),l=(0,o.KR)(""),n=(0,o.KR)(""),r=(0,o.KR)(""),d=(0,o.KR)(!1),u=async()=>{if(t.value&&l.value&&n.value&&r.value){const o={internmentId:Number(t.value),dischargeDate:l.value,dischargeTime:n.value,authorizingDoctorId:Number(r.value)};d.value=!0;try{const e=await i(o);a("close"),d.value=!1,I().fire({icon:"success",title:"Alta Creado",text:e.data.message,confirmButtonText:"OK"})}catch(e){a("close"),d.value=!1,I().fire({icon:"error",title:"Error",text:e.response?.data?.message||"Hubo un error al crear el internamiento",confirmButtonText:"OK"})}}else console.log("Formulario incompleto")};return{internmentId:t,dischargeDate:l,dischargeTime:n,authorizingDoctorId:r,dialogLoader:d,submitInternamiento:u}}};const K=(0,h.A)(A,[["render",D]]);var W=K,L=t(6756),R=t(5526);const T={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},U=(0,l.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-400"},"ALTAS MEDICAS",-1);var z={__name:"AltasView",setup(e){const a=(0,o.KR)(!1),t=()=>{a.value=!0};return(e,o)=>((0,l.uX)(),(0,l.CE)("div",T,[(0,l.bF)(k.r,{class:"d-flex justify-between"},{default:(0,l.k6)((()=>[U,(0,l.bF)(p.D,{color:"primary",class:"white--text",onClick:t,style:{"margin-left":"auto"}},{default:(0,l.k6)((()=>[(0,l.eW)(" Crear + ")])),_:1})])),_:1}),(0,l.bF)(L.L,null,{default:(0,l.k6)((()=>[(0,l.bF)(R.B,{cols:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})])),_:1}),(0,l.bF)(y.p,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value=e),"max-width":"500px"},{default:(0,l.k6)((()=>[(0,l.bF)(W,{onClose:o[0]||(o[0]=e=>a.value=!1)})])),_:1},8,["modelValue"])]))}};const E=z;var O=E}}]);
//# sourceMappingURL=318.6b8c1303.js.map